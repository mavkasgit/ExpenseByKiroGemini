# Миграции базы данных

## Как выполнить миграцию

1. Откройте Supabase Dashboard для вашего проекта
2. Перейдите в раздел "SQL Editor"
3. Скопируйте содержимое файла миграции и выполните его

## Доступные миграции

### create_category_groups_table.sql
Создает таблицу `category_groups` для управления группами категорий.

**Что делает:**
- Создает таблицу `category_groups` с полями: id, name, icon, color, description, sort_order, user_id, created_at, updated_at
- Добавляет индексы для оптимизации запросов
- Настраивает RLS (Row Level Security) политики
- Создает стандартные группы для существующих пользователей
- Добавляет триггер для автоматического обновления `updated_at`

**Выполнить после:** Создания базовых таблиц проекта

### add_notes_to_expenses.sql
Добавляет поле `notes` в таблицу `expenses`.

**Статус:** ✅ Выполнена

### add_html_support_to_bank_statements.sql
Добавляет поддержку HTML формата в таблицу `bank_statements`.

**Что делает:**
- Удаляет старое ограничение `bank_statements_file_type_check`
- Добавляет новое ограничение с поддержкой HTML
- Добавляет комментарии к таблице и столбцу

**Статус:** ✅ Выполнена 2025-08-14

## Лог миграций

Подробный лог всех выполненных миграций см. в `migration-log.md`.