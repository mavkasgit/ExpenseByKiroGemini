+# ExpenseByKiroGemini — памятка агента
+
+## Технологический стек
+- Next.js 15 с App Router, TypeScript и строгой типизацией.
+- Tailwind CSS для стилизации, конфиг находится в `tailwind.config.ts`.
+- Supabase (PostgreSQL + Auth) как основная БД, клиенты расположены в `src/lib/supabase/` (`client.ts` и `server.ts`).
+- Zod используется для валидации данных (`src/lib/validations/`).
+
+## Архитектура и структура каталогов
+- Страницы и маршруты: `src/app/` (используются React Server Components и маршруты App Router).
+- Повторно используемые компоненты: `src/components/` (есть папки для форм, ввода расходов, категорий, модалок и базовых UI-элементов).
+- Серверные действия (Server Actions) находятся в `src/lib/actions/` и используют `createServerClient` из `src/lib/supabase/server.ts`.
+- Общие утилиты в `src/lib/`, типы определены в `src/types/index.ts`.
+- Глобальные стили и Tailwind-слои подключены через `src/app/globals.css`.
+
+## Ключевые UI-компоненты ввода
+- `src/components/ui/Input.tsx` — базовый обёрточный компонент `<input>` с автофокусом по id, вариациями стиля, обработкой ошибок и **всегда отключённым `autoComplete`**.
+- `src/components/ui/TimeInput.tsx` — комбинированный ввод часов и минут, опирается на два `<input type="text">` с `inputMode="numeric"` и отключенным `autoComplete`.
+- `src/components/ui/SearchableSelect.tsx` — текстовый ввод с фильтрацией вариантов (также без автодополнения браузера).
+- Все текстовые, числовые и парольные поля в формах (`LoginForm`, `SignUpForm`, `ResetPasswordForm`, `ForgotPasswordForm`, формы расходов и категорий) теперь явно устанавливают `autoComplete="off"`, включая текстовые области (`textarea`).
+
+## Бизнес-логика расходов
+- Базовые формы и модалки:
+  - `ExpenseForm` и `ExpenseEditModal` — основное создание/редактирование расходов, используют `Input`, `DatePicker`, `TimeInput`, `SearchableSelect`, `textarea` для заметок.
+  - `QuickExpenseForm` — ускоренный ввод с автофокусом и подсказками по городу.
+  - `BulkExpenseInput` + `BulkExpenseTable` — пакетная обработка расходов и загрузка CSV/табличных данных.
+  - `InlineNotesEditor` — инлайновое редактирование заметок со снятым `autoComplete`.
+- Категории управляются компонентами в `src/components/categories/`, в т.ч. модалками `GroupsModal`, `SortableGroupItem`, `CategoryForm` (везде отключен автокомплит).
+
+## Работа с данными и валидацией
+- Все формы проходят проверку через схемы Zod (см. `src/lib/validations/expense.ts`, `category.ts`, `auth.ts` и т.п.).
+- Серверные действия возвращают результаты с единым контрактом `{ data, error }`, ошибки логируются и показываются пользователю через `useToast` или компоненты `ErrorMessage`.
+- Для операций, связанных с БД, важно прокидывать `userId` из `supabase.auth.getUser()` и проверять права доступа.
+
+## Команды разработчика
+- Установка зависимостей: `npm install`.
+- Сборка: `npm run build` (обязательна перед завершением задачи).
+- Локальный запуск: `npm run dev` (Next.js dev server).
+- Форматирование соблюдается через ESLint/TypeScript (не добавлять `try/catch` вокруг импортов, следовать существующим Tailwind-классам).
+
+## Нюансы и best practices
+- Всегда используйте типы из `src/types/index.ts` и схемы Zod для новых данных.
+- Для взаимодействия с Supabase на сервере применяйте `createServerClient`, на клиенте — `createClient`.
+- Следите за UX: автокомплит браузера должен быть отключён во всех полях ввода текста/чисел, чтобы не мешать пользовательским сценарием (особенно городам и примечаниям).
+- При добавлении новых форм или полей обязательно прокидывайте `autoComplete="off"` и соответствующие `maxLength`, `placeholder`, `aria`-атрибуты.
+- Используйте Server Actions вместо API-роутов, хэндлите ошибки и показывайте тосты.
+- Не забывайте вызывать `npm run build` и добавлять тесты/валидацию по мере расширения функциональности.
+
+## Контакты и навигация
+- Основная документация: `README.md`, `docs/`.
+- В новой функциональности придерживайтесь модульной структуры (компоненты в соответствующих подпапках, бизнес-логика — в `lib/`).
+
